<!DOCTYPE html>
<!-- saved from url=(0030)https://ips.progesio.my.id/tes -->
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Soal Pilihan Ganda dengan Timer</title>
    <!-- Bootstrap CSS -->
    <link href="./pg_files/bootstrap.min.css" rel="stylesheet" />
    <!-- SweetAlert2 CSS -->
    <link href="./pg_files/sweetalert2.min.css" rel="stylesheet" />
    <style>
      /* Fixed Footer */
      .fixed-footer {
        position: fixed;
        bottom: 0;
        width: 100%;
        background-color: #343a40;
        color: white;
        text-align: center;
        padding: 10px;
        font-size: 18px;
      }
    </style>
  </head>

  <body class="" style="">
    <div class="container mt-5">
        <h2 class="text-center">Soal Pilihan Ganda</h2>
  
        <!-- Nav tabs -->
        <ul
          class="nav nav-pills justify-content-center"
          id="quizTabs"
          role="tablist"
        >
          
        </ul>
  
        <!-- Tab content -->
        <div class="tab-content mt-3" id="quizTabsContent">
          
        </div>
      </div>

    <!-- Fixed Footer with Timer -->
    <div class="fixed-footer" id="timer">
      <p id="countdown">Waktu tersisa: 28 menit 7 detik</p>
    </div>

    <!-- Fullscreen Modal -->
    <div
      class="modal fade"
      id="startModal"
      tabindex="-1"
      aria-labelledby="startModalLabel"
      aria-hidden="true"
      style="display: none"
    >
      <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="startModalLabel">Mulai Kuis</h5>
          </div>
          <div class="modal-body">
            <form id="startForm">
              <div class="mb-3">
                <label for="studentName" class="form-label">Nama Siswa</label>
                <input
                  type="text"
                  class="form-control"
                  id="studentName"
                  name="studentName"
                  value=""
                  required=""
                />
              </div>
              <div class="mb-3">
                <label for="studentNumber" class="form-label"
                  >Nomor Absen</label
                >
                <input
                  type="number"
                  class="form-control"
                  id="studentNumber"
                  name="studentNumber"
                  value=""
                  required=""
                />
              </div>
              <div class="form-check mb-3">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="honestyCheck"
                  required=""
                />
                <label class="form-check-label" for="honestyCheck">
                  Saya mengerjakan ini dengan jujur dan berani
                </label>
              </div>
              <button type="submit" class="btn btn-primary">Mulai</button>

              <div class="text-center mt-3"></div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="./pg_files/popper.min.js"></script>
    <script src="./pg_files/bootstrap.min.js"></script>
    <!-- SweetAlert2 JS -->
    <script src="./pg_files/sweetalert2.min.js"></script>

    <script>
      // Timer countdown (30 minutes)
      var time = 30 * 60; // 30 minutes in seconds
      var countdownElement = document.getElementById("countdown");

      function updateTimer() {
        var minutes = Math.floor(time / 60);
        var seconds = time % 60;
        countdownElement.textContent =
          "Waktu tersisa: " + minutes + " menit " + seconds + " detik";

        if (time === 0) {
          clearInterval(timerInterval);
          Swal.fire({
            icon: "error",
            title: "Waktu Habis",
            text: "Waktu kuis telah habis. Harap submit jawaban Anda.",
          });
        } else {
          time--;
        }
      }

      var timerInterval;

      var soallist = [
        {
          soal: `<p>Apa yang menjadi penyebab utama gagalnya perlawanan rakyat Indonesia sebelum tahun 1908?</p>`,
          jawaban: [
            "Kurangnya tokoh perjuangan",
            "Kekalahan teknologi senjata",
            "Perlawanan yang bersifat kedaerahan",
            "Tidak ada dukungan dari negara asing",
          ],
          jawabanbenar: 2,
        },
        {
          soal: `<p>Organisasi modern pertama yang lahir pada tahun 1908 adalah...</p>`,
          jawaban: [
            "Indische Partij",
            "Sarekat Islam",
            "Perhimpunan Indonesia",
            "Budi Utomo",
          ],
          jawabanbenar: 3,
        },
        {
          soal: `<p>Sumpah Pemuda yang dideklarasikan pada 28 Oktober 1928 memiliki tujuan utama untuk...</p>`,
          jawaban: [
            "Memperjuangkan kemerdekaan melalui jalur politik",
            "Menyatukan bangsa Indonesia dalam satu identitas nasional",
            "Melawan penjajahan secara bersenjata",
            "Membentuk pemerintahan sementara",
          ],
          jawabanbenar: 1,
        },
        {
          soal: `<p>Salah satu tokoh yang berperan dalam Kongres Pemuda II adalah...</p>`,
          jawaban: [
            "Soekarno",
            "Soegondo Djojopoespito",
            "Hatta",
            "Diponegoro",
          ],
          jawabanbenar: 1,
        },
        {
          soal: `<p>Pada masa awal penjajahan Hindia Belanda, perlawanan yang dilakukan masyarakat Indonesia sebagian besar berbasis pada...</p>`,
          jawaban: [
            "Ideologi modern",
            "Nasionalisme yang kuat",
            "Semangat daerah dan kerajaan",
            "Dukungan dari negara lain",
          ],
          jawabanbenar: 2,
        },
        {
          soal: `<p>Pada Kongres Pemuda II, konsep "Satu Nusa, Satu Bangsa, dan Satu Bahasa" pertama kali diajukan oleh...</p>`,
          jawaban: [
            "Soegondo Djojopoespito",
            "Mohammad Yamin",
            "Ki Hajar Dewantara",
            "Tjipto Mangoenkoesoemo",
          ],
          jawabanbenar: 1,
        },
        {
          soal: `<p>Apa tujuan Jepang memberikan janji kemerdekaan kepada bangsa Indonesia?</p>`,
          jawaban: [
            "Menghapus perlawanan bangsa Indonesia",
            "Mencari dukungan dari bangsa Indonesia",
            "Menghentikan penjajahan Belanda",
            "Meningkatkan persenjataan Jepang",
          ],
          jawabanbenar: 1,
        },
        {
          soal: `<p>Apa nama peristiwa yang menjadi tanda menyerahnya Jepang kepada Sekutu?</p>`,
          jawaban: [
            "Perjanjian Renville",
            "Peristiwa Rengasdengklok",
            "Penyerahan Jepang tanpa syarat",
            "Penyerahan Kalijati",
          ],
          jawabanbenar: 2,
        },
        {
          soal: `<p>Pada tanggal berapakah Jepang menyerah tanpa syarat kepada Sekutu?</p>`,
          jawaban: [
            "6 Agustus 1945",
            "15 Agustus 1945",
            "17 Agustus 1945",
            "2 September 1945",
          ],
          jawabanbenar: 3,
        },
        {
          soal: `<p>Janji Koiso diberikan kepada bangsa Indonesia pada tanggal?</p>`,
          jawaban: [
            "1 Maret 1945",
            "29 Mei 1945",
            "17 Juli 1945",
            "7 September 1944",
          ],
          jawabanbenar: 3,
        },
        {
          soal: `<p>Siapa ketua BPUPKI saat dibentuk?</p>`,
          jawaban: [
            "Ir. Soekarno",
            "Drs. Moh. Hatta",
            "Dr. K.R.T. Rajiman Wedyodiningrat",
            "Ahmad Subarjo",
          ],
          jawabanbenar: 2,
        },
        {
          soal: `<p>Apa tujuan pembentukan BPUPKI?</p>`,
          jawaban: [
            "Menyusun dasar negara",
            "Menyusun Undang-Undang Dasar",
            "Mempersiapkan kemerdekaan Indonesia",
            "Menyusun wilayah negara",
          ],
          jawabanbenar: 2,
        },
        {
          soal: `<p>Dalam sidang pertama BPUPKI, siapa yang menyampaikan gagasan dasar negara pertama kali?</p>`,
          jawaban: [
            "Ir. Soekarno",
            "Drs. Moh. Hatta",
            "Dr. Soepomo",
            "Prof. Muh. Yamin",
          ],
          jawabanbenar: 0,
        },
        {
          soal: `<p>Dalam gagasan dasar negara Ir. Soekarno, salah satu elemen utamanya adalah ...</p>`,
          jawaban: [
            "Kekeluargaan",
            "Internasionalisme dan Perikemanusiaan",
            "Peri Kemanusiaan",
            "Keseimbangan lahir dan batin",
          ],
          jawabanbenar: 1,
        },
        {
          soal: `<p>&nbsp;Sidang kedua BPUPKI membahas tentang hal berikut, kecuali</p>`,
          jawaban: [
            "Wilayah NKRI",
            "Kewarganegaraan",
            "Hubungan Internasional",
            "Rencana Undang-Undang Dasar",
          ],
          jawabanbenar: 2,
        },
        {
          soal: `<p>Siapa yang mengetuai panitia kecil pada sidang kedua BPUPKI?</p>`,
          jawaban: [
            "Dr. Soepomo",
            "Ir. Soekarno",
            "Ahmad Subarjo",
            "Drs. Moh. Hatta",
          ],
          jawabanbenar: 1,
        },
        {
          soal: `<p><strong>Apa yang menjadi simbol persatuan rakyat Indonesia dalam pergerakan nasional?</strong></p>`,
          jawaban: [
            "Ikrar Sumpah Pemuda",
            "Proklamasi Kemerdekaan",
            "Kongres Pemuda I",
            "Organisasi Budi Utomo",
          ],
          jawabanbenar: 0,
        },
        {
          soal: `<p><strong>Apa yang menjadi salah satu faktor internal yang mendorong munculnya pergerakan nasional di Indonesia?</strong></p>`,
          jawaban: [
            "Perang Dunia I",
            "Kesadaran Nasional",
            "Ideologi Sosialisme",
            "Pengaruh Pergerakan Kemerdekaan di Negara Lain",
          ],
          jawabanbenar: 1,
        },
        {
          soal: `<p><strong>Organisasi manakah yang merupakan pergerakan nasional pertama yang didirikan di Indonesia?</strong></p>`,
          jawaban: [
            "Sarekat Islam",
            "Indische Partij",
            "Budi Utomo",
            "Perhimpunan Indonesia",
          ],
          jawabanbenar: 2,
        },
        {
          soal: `<p><strong>Apa tujuan utama dari Ikrar Sumpah Pemuda yang diikrarkan pada tanggal 28 Oktober 1928?</strong></p>`,
          jawaban: [
            "Meningkatkan pendidikan masyarakat",
            "Memperjuangkan hak-hak ekonomi rakyat kecil",
            "Menyatukan rakyat Indonesia untuk melawan penjajah",
            "Mengorganisir pergerakan politik",
          ],
          jawabanbenar: 2,
        },
      ];

      var jawabanuser = [];

      function loadQuestions() {
        var quizTabs = document.getElementById("quizTabs");
        var quizTabsContent = document.getElementById("quizTabsContent");

        soallist.forEach((item, index) => {
          // Create tab
          var tab = document.createElement("li");
          tab.className = "nav-item";
          tab.role = "presentation";
          tab.innerHTML = `
                    <a class="nav-link ${index === 0 ? "active" : ""}" id="tab${
            index + 1
          }" data-bs-toggle="pill" href="#content${
            index + 1
          }" role="tab" aria-controls="content${index + 1}" aria-selected="${
            index === 0 ? "true" : "false"
          }">Soal ${index + 1}</a>
                `;
          quizTabs.appendChild(tab);

          // Create tab content
          var tabContent = document.createElement("div");
          tabContent.className = `tab-pane fade ${
            index === 0 ? "show active" : ""
          }`;
          tabContent.id = `content${index + 1}`;
          tabContent.role = "tabpanel";
          tabContent.ariaLabelledby = `tab${index + 1}`;
          tabContent.innerHTML = `
                    <h4>Soal ${index + 1}</h4>
                    <p>${item.soal}</p>
                    <form id="form${index + 1}"></form>
                    <button type="button" class="btn ${
                      index === soallist.length - 1
                        ? "btn-success"
                        : "btn-primary"
                    } mt-3" onclick="${
            index === soallist.length - 1
              ? "submitQuiz()"
              : `nextTab(${index + 2})`
          }">${index === soallist.length - 1 ? "Submit" : "Next"}</button>
                `;
          quizTabsContent.appendChild(tabContent);

          // Add answers to form
          var form = document.getElementById(`form${index + 1}`);
          item.jawaban.forEach((jawaban, i) => {
            var div = document.createElement("div");
            div.className = "form-check";
            div.innerHTML = `
                        <input class="form-check-input" type="radio" name="question${
                          index + 1
                        }" id="q${index + 1}${i}" value="${i}">
                        <label class="form-check-label" for="q${
                          index + 1
                        }${i}">${jawaban}</label>
                    `;
            form.appendChild(div);
          });
        });
      }

      function nextTab(tabNumber) {
        // Save user answer
        var currentTab = tabNumber - 1;
        var selectedOption = document.querySelector(
          `input[name="question${currentTab}"]:checked`
        );
        if (selectedOption) {
          jawabanuser[currentTab - 1] = parseInt(selectedOption.value);
        }

        // Validation for current question
        if (!selectedOption) {
          Swal.fire({
            icon: "warning",
            title: "Oops...",
            text: `Anda harus memilih salah satu jawaban untuk Soal ${currentTab} sebelum melanjutkan.`,
          });
          return;
        }

        // Move to next tab
        var myTab = new bootstrap.Tab(
          document.getElementById("tab" + tabNumber)
        );
        myTab.show();
      }

      function submitQuiz() {
        // Save user answer for the last question
        var selectedOption = document.querySelector(
          `input[name="question${soallist.length}"]:checked`
        );
        if (selectedOption) {
          jawabanuser[soallist.length - 1] = parseInt(selectedOption.value);
        }

        // Calculate score
        var score = 0;
        soallist.forEach((item, index) => {
          if (jawabanuser[index] === item.jawabanbenar) {
            score++;
          }
        });
        console.log((score * 100) / 20);

        // save score to session using fetch
        fetch("/score?score=" + (score * 100) / soallist.length)
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
          });

        Swal.fire({
          icon: "success",
          title: "Kuis Selesai",
          text: `Terima kasih telah menyelesaikan kuis! Nilai Anda adalah ${
            (score * 100) / soallist.length
          } dari ${score + "/" + soallist.length}.`,
        });
        console.log(jawabanuser);

        setTimeout(() => {
          window.location.href = "/";
        }, 2000);
      }

      document
        .getElementById("startForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();
          var studentName = document.getElementById("studentName").value;
          var studentNumber = document.getElementById("studentNumber").value;
          var honestyCheck = document.getElementById("honestyCheck").checked;

          if (studentName && studentNumber && honestyCheck) {
            // Start the timer
            timerInterval = setInterval(updateTimer, 1000);
            // Hide the modal
            var startModal = bootstrap.Modal.getInstance(
              document.getElementById("startModal")
            );
            startModal.hide();
          } else {
            Swal.fire({
              icon: "warning",
              title: "Oops...",
              text: "Harap isi semua bidang dan centang kotak untuk melanjutkan.",
            });
          }
        });

      // Show the modal on page load
      var startModal = new bootstrap.Modal(
        document.getElementById("startModal"),
        {
          backdrop: "static",
          keyboard: false,
        }
      );
      startModal.show();

      loadQuestions();
    </script>
    <audio
      id="click-sound"
      src="https://www.myinstants.com/media/sounds/switch-sound.mp3"
    ></audio>
    <script>
      document.addEventListener("click", function () {
        var audio = document.getElementById("click-sound");
        audio.play();
      });
    </script>
  </body>
</html>
